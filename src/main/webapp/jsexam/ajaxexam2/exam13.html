<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>JSP test example</title>
</head>
<body>
	<h1>RequestBody Test!!!!</h1>	
	<hr>
	<h3>AJAX를 통한 요청</h3>
	<button data-pname="둘리" data-page="10"><img src="/edu/images/dooly.png"></button>
	<button data-pname="또치" data-page="11"><img src="/edu/images/ddochi.png"></button>
	<button data-pname="도우너" data-page="12"><img src="/edu/images/dauner.png"></button>
	<hr>
	<h2 id="msg_area"></h2>
	<script>
		const buttons = document.querySelectorAll("button");
		const postData = event => {
			console.log("데이터 전송"+event.target);
			fetch("http://localhost:8088/edu/jsexam/ajaxexam/content/postjson.jsp", {
				method: 'post',
				headers: {'content-type': 'application/json'},
				body : JSON.stringify({
					name : event.target.getAttribute("data-pname"),
					age : event.target.getAttribute("data-page")
				})
			})
			.then((response) => response.json())
			.then((data) => {
				console.log('성공:', data);
				document.querySelector("#msg_area").textContent = `${data.name}는 ${data.age}세입니당~~`;
			});
		};
		buttons.forEach( elem =>  elem.addEventListener("click", postData));
	</script>
</body>
</html>



