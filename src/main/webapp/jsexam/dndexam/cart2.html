<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<style>
		.wrapper {
			margin: 0 auto;
			text-align: center;
		}
		h2 {
			font-weight: bold;
			background-image: linear-gradient(to right, lightblue, lightgreen);
			padding: 30px; 
			color: steelblue;
			font-size: 36px;
		}
		img {
			width: 150px;
			height: 150px;
			border: 1px solid black;
			box-shadow: 15px 15px 5px #333;
			margin: 0 14px;
			transition: all 0.5s;
			
			&:hover { 
				scale: 1.1;
				opacity: 0.5;  
				transform: rotateZ(30deg);
			}
		}
		.cart-section {
			display: flex;
			align-items: center;
			justify-content: center;
			flex-direction:column-reverse;
		}
		h3 {
			color: steelblue;
			font-size: 36px;
			font-weight: bold;
			margin: 0;
			padding: 0;
		}
		.cart {
			padding: 20px; 
			list-style-type: none; 
			text-align: center; 
			border: 2px dotted purple;
			border-radius: 15px;
			width: 400px;
			height: 320px;
			background-image: linear-gradient(to right, lightblue, lightgreen);
		}
		li {
			text-align: center;
			margin-bottom: 10px; 
		}
	</style>
</head>
<body>
	<div class="wrapper">
		<h2>원하는 상품을 드래그하여 장바구니에 넣으세요~~</h2>
		<hr /> 
		<figure>
			<img src="../../images/1.jpg" id="1" alt="사진없음" />
			<img src="../../images/2.jpg" id="2" alt="사진없음" />
			<img src="../../images/3.jpg" id="3" alt="사진없음" />
			<img src="../../images/4.jpg" id="4" alt="사진없음" />
			<img src="../../images/5.jpg" id="5" alt="사진없음" />
			<br /><br />
			<img src="../../images/6.jpg" id="6" alt="사진없음" />
			<img src="../../images/7.jpg" id="7" alt="사진없음" />
			<img src="../../images/8.jpg" id="8" alt="사진없음" />
			<img src="../../images/9.jpg" id="9" alt="사진없음" />
			<img src="../../images/10.jpg" id="10" alt="사진없음" />
		</figure>
		<div class="cart-section">
			<h3>🛒 장바구니</h3> 
			<ul class="cart"></ul>
		</div>
	</div>
	
	<script>
		const cart = document.querySelector(".cart");
		const image = document.querySelectorAll("img");
		let localArr;
		
		for(let i = 0; i < image.length; i++) {
			image[i].addEventListener("dragstart", dragged);
		}
		
		cart.addEventListener('dragover', function(e){ e.preventDefault(); }, false);
		cart.addEventListener('drop', dropped, false);
		
		if(localStorage.getItem("localArr")) {
			localArr = JSON.parse(localStorage.getItem("localArr"));

		} else {
			localArr = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
		}
		
		printing();
		
		function dragged(e){
			e.dataTransfer.setData('Text', e.target.getAttribute('id'));
		}
		
		function dropped(e) {
			e.preventDefault();
			let id = e.dataTransfer.getData('Text');
			let src = document.getElementById(id);
			localArr[id-1]++;
			localStorage.setItem("localArr", JSON.stringify(localArr));
			printing();
		}
		
		function printing() {
			const arr = JSON.parse(localStorage.getItem("localArr"));
			console.log("arr", arr);
			cart.innerHTML = ``;
			for(let i = 1; i <= arr.length; i++) {
				if(arr[i-1] !== 0) {
					cart.innerHTML += `<li>${i}번 상품 ${arr[i-1]}개</li>`;
				}
			}
		}
	</script>
</body>
</html>